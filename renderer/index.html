<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Terraform UI</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="brand">Terraform UI</div>
      <div class="workspace">
        <button id="btn-open-workspace" title="Open Terraform workspace">Open Workspace</button>
        <span id="workspace-path" class="workspace-path">No workspace selected</span>
        <span id="snapshot-indicator" class="snapshot-indicator" title="Last pulled state snapshot">Snapshot: â€”</span>
      </div>
      <div class="actions">
        <button id="btn-init">Init</button>
        <button id="btn-plan">Plan</button>
        <button id="btn-refresh">Refresh</button>
        <button id="btn-apply" class="primary">Apply</button>
        <button id="btn-destroy" class="danger">Destroy</button>
      </div>
    </header>

    <main class="layout">
      <aside class="sidebar">
        <div class="panel-title">Resources</div>
        <ul id="resources-list" class="resources-list"></ul>
      </aside>
      <section class="content">
        <div class="tabs">
          <button id="tab-inspect" class="tab active">Inspect</button>
          <button id="tab-graph" class="tab">Graph</button>
        </div>
        <div class="split">
          <div class="details">
            <div class="panel-title">Details</div>
            <pre id="resource-details" class="details-pre">Select a resource to view details</pre>
          </div>
          <div class="tools">
            <div class="panel">
              <div class="panel-title">State Refactor</div>
              <div class="form-row">
                <label>Move</label>
                <input id="mv-src" placeholder="Source address (e.g. aws_instance.web)" />
                <input id="mv-dst" placeholder="Destination address (e.g. aws_instance.web_new)" />
                <button id="btn-state-mv">Move</button>
              </div>
              <div class="form-row">
                <label>Remove</label>
                <input id="rm-addr" placeholder="Address to remove" />
                <button id="btn-state-rm" class="danger">Remove</button>
              </div>
            </div>

            <div class="panel">
              <div class="panel-title">Import Resource</div>
              <div class="form-row">
                <input id="import-addr" placeholder="Address (e.g. aws_instance.web)" />
                <input id="import-id" placeholder="Provider-specific ID" />
                <button id="btn-import">Import</button>
              </div>
            </div>
          </div>
        </div>

        <div id="graph-panel" class="graph-panel hidden">
          <div class="panel" style="height:100%">
            <div class="panel-title row">
              <span>Dependency Graph</span>
              <div class="graph-controls">
                <button id="btn-collapse-modules" title="Collapse all modules">Collapse all</button>
                <button id="btn-expand-modules" title="Expand all modules">Expand all</button>
                <button id="btn-relayout" title="Re-run layout">Re-layout</button>
              </div>
            </div>
            <div id="graph-area" class="graph-area">
              <div id="cy"></div>
            </div>
          </div>
        </div>

        <div class="logs">
          <div class="panel-title">Logs</div>
          <pre id="logs-pre" class="logs-pre"></pre>
        </div>
      </section>
    </main>

    <div id="context-menu" class="context-menu hidden">
      <div class="menu-item" data-action="rename">Rename (state mv)</div>
      <div class="menu-item danger" data-action="remove">Remove from state</div>
      <div class="menu-item" data-action="show">Show state (terraform state show)</div>
      <div class="menu-item" data-action="collapse-module">Collapse module</div>
      <div class="menu-item" data-action="expand-module">Expand module</div>
    </div>

    <!-- Rename Modal -->
    <div id="rename-modal" class="modal hidden">
      <div class="modal-dialog">
        <div class="modal-title">Rename resource (terraform state mv)</div>
        <input id="rename-input" placeholder="Destination address (e.g. aws_instance.web_new)" />
        <div class="modal-actions">
          <button id="btn-rename-cancel">Cancel</button>
          <button id="btn-rename-ok" class="primary">Rename</button>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/elkjs/lib/elk.bundled.js"></script>
    <script src="https://unpkg.com/cytoscape-elk/cytoscape-elk.js"></script>
    <script src="https://unpkg.com/cytoscape-expand-collapse@4.1.0/cytoscape-expand-collapse.js"></script>
    <script src="renderer.js"></script>
  </body>
  </html>



